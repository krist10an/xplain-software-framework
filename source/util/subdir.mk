util-subdir-$(CONFIG_GFX)			+= $(src)/util/gfx
util-subdir-$(CONFIG_GENERIC_STRING_IMPL)	+= $(src)/util/string
util-subdir-$(CONFIG_STREAM)			+= $(src)/util/stream
util-subdir-$(CONFIG_TEST_SUITE)		+= $(src)/util/test
util-subdir-$(CONFIG_FS_TSFS)                   += $(src)/util/fs

include $(addsuffix /subdir.mk,$(util-subdir-y))

hdr-y				+= include/assembler.h
hdr-y				+= include/assembler/gas.h
hdr-y				+= include/assembler/iar.h
hdr-y				+= include/assert.h
hdr-y				+= include/atomic.h
hdr-y				+= include/generic/atomic.h
hdr-y				+= include/bitops.h
hdr-$(CONFIG_BUFFER)		+= include/buffer.h
hdr-y				+= include/byteorder.h
hdr-y				+= include/compiler/gcc.h
hdr-y				+= include/compiler/iar.h
hdr-y				+= include/compiler/sparse.h
hdr-y				+= include/compiler.h
hdr-y				+= include/debug.h
hdr-y				+= include/delay.h
hdr-y				+= include/dma.h
hdr-$(CONFIG_DMAPOOL)		+= include/dmapool.h
hdr-y				+= include/intc.h
hdr-y				+= include/interrupt.h
hdr-y				+= include/io.h
hdr-y				+= include/led.h
hdr-y				+= include/linker.h
hdr-$(CONFIG_MAINLOOP)		+= include/mainloop.h
hdr-$(CONFIG_MALLOC_SIMPLE)	+= include/malloc.h
hdr-$(CONFIG_MALLOC_SIMPLE)	+= include/malloc/simple.h
hdr-$(CONFIG_MEMBAG)		+= include/membag.h
hdr-$(CONFIG_MEMPOOL)		+= include/mempool.h
hdr-$(CONFIG_PHYSMEM)		+= include/physmem.h
hdr-$(CONFIG_HUGEMEM)           += include/hugemem.h
hdr-y                           += include/progmem.h
hdr-y				+= include/ring.h
hdr-$(CONFIG_SETJMP)		+= include/setjmp.h
hdr-y				+= include/sleep.h
hdr-y				+= include/slist.h
hdr-$(CONFIG_SOFTIRQ)		+= include/softirq.h
hdr-y				+= include/status_codes.h
hdr-y				+= include/stdint.h
hdr-y				+= include/string.h
hdr-y				+= include/types.h
hdr-y				+= include/unaligned.h
hdr-y				+= include/util.h
hdr-$(CONFIG_MAINLOOP)		+= include/workqueue.h

src-$(CONFIG_BUFFER)		+= util/buffer.c
src-$(CONFIG_DMAPOOL)		+= util/dmapool.c
src-$(CONFIG_HUGEMEM)           += util/hugemem.c
src-$(CONFIG_MALLOC_SIMPLE)	+= util/malloc_simple.c
src-$(CONFIG_MEMBAG)		+= util/membag.c
src-$(CONFIG_MEMPOOL)		+= util/mempool.c
src-$(CONFIG_PHYSMEM)		+= util/physmem.c
src-$(CONFIG_SOFTIRQ)		+= util/softirq_common.c
src-$(CONFIG_MAINLOOP)		+= util/workqueue.c

mkfiles				+= $(src)/util/subdir.mk
